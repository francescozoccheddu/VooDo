<Window
    x:Class="VooDo.Testbench.Desktop.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:tb="using:VooDo.Testbench.Desktop"
    xmlns:voodo="using:VooDo.WinUI.Xaml">

    <Grid Background="LightGray">

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid
                x:Name="m_header"
                Grid.Row="0"
                Padding="10"
                Background="Gray">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="m_headerText" VerticalAlignment="Center">
                    Header
                </TextBlock>

            </Grid>

            <GridView
                x:Name="m_gridView"
                Grid.Row="1"
                Margin="10"
                HorizontalAlignment="Center"
                SelectionMode="None">

                <GridView.ItemTemplate>
                    <DataTemplate x:DataType="tb:Item">
                        <Border
                            Width="150"
                            Height="200"
                            Margin="10">

                            <Grid
                                Width="140"
                                Height="190"
                                Background="White"
                                CornerRadius="5">

                                <voodo:Object.Binding>
                                    <voodo:Property>
                                        global double focus = 0;
                                        if (this.PointerEntered)
                                            $focus = Smooth(1);
                                        if (this.PointerExited)
                                            $focus = Smooth(0);
                                        double margin = Lerp(5, 0, focus);
                                        FrameworkElement parent = (FrameworkElement) this.Parent;
                                        this.Width = parent.Width - margin;
                                        this.Height = parent.Height - margin;
                                        this.Opacity = Lerp(0.75, 1, focus);
                                        this.CornerRadius = new(Lerp(5, 2, focus));
                                    </voodo:Property>
                                </voodo:Object.Binding>

                                <Grid.Shadow>
                                    <ThemeShadow/>
                                </Grid.Shadow>


                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <TextBlock Text="{x:Bind Title}" />

                            </Grid>

                        </Border>
                    </DataTemplate>
                </GridView.ItemTemplate>

            </GridView>


        </Grid>

        <Border
            x:Name="m_buttonBorder"
            Margin="0,0,30,20"
            Padding="10"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Background="Black">

            <Button x:Name="m_button">
                Go up!
            </Button>

        </Border>

    </Grid>

</Window>
